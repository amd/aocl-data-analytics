# Build the single precision version
add_compile_definitions(SINGLE_PREC)
add_library(lbfgsb_s OBJECT ${LBFGSB_SRC} ../sworking_precision.F90)

if (WIN32)
  if (CMAKE_Fortran_COMPILER_ID MATCHES "Intel")
    target_link_directories(lbfgsb_s PUBLIC "$ENV{IFORT_LIBS}")
  else()
  	set_target_properties(lbfgsb_s PROPERTIES PREFIX "")
	target_link_libraries(lbfgsb_s ${LIBGFORTRAN})
  endif()
endif()
target_link_libraries(lbfgsb_s ${BLIS})
if (NOT WIN32 AND ${CMAKE_CXX_COMPILER_ID} MATCHES "GNU")
  target_link_libraries(lbfgsb_s -lgfortran)
endif()